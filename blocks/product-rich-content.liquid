{% liquid
  assign heading = block.settings.heading
  assign content_setting = block.settings.rich_content

  assign preset = block.settings.font_preset | default: 'body'
  assign preset_class = ''
  if preset == 'body'
    assign preset_class = 'paragraph'
  elsif preset == 'h1'
    assign preset_class = 'text-block h1'
  elsif preset == 'h2'
    assign preset_class = 'text-block h2'
  elsif preset == 'h3'
    assign preset_class = 'text-block h3'
  elsif preset == 'h4'
    assign preset_class = 'text-block h4'
  elsif preset == 'h5'
    assign preset_class = 'text-block h5'
  elsif preset == 'h6'
    assign preset_class = 'text-block h6'
  endif
%}

{% if heading != blank %}
  <h3 class="product-rich-content__heading">{{ heading }}</h3>
{% endif %}

<div class="product-rich-content rte {{ preset_class }}" style="color: {{ block.settings.content_text_color }}; line-height: {{ block.settings.content_line_height }}; --prc-line-height: {{ block.settings.content_line_height }}; --prc-li-gap: {{ block.settings.list_item_gap | default: 0 }}px;">
  {% if content_setting %}
    {% if content_setting.type %}
      {{ content_setting | metafield_tag }}
    {% else %}
      {{ content_setting }}
    {% endif %}
  {% else %}
    {% if request.design_mode %}
      <p style="opacity:.6;">Connect a dynamic source (product rich text metafield) to this block.</p>
    {% endif %}
  {% endif %}
</div>

{% schema %}
{
  "name": "Product Rich Content",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Rich content" },
    { "type": "richtext", "id": "rich_content", "label": "Content" },
    { "type": "header", "content": "Typography" },
    { "type": "select", "id": "font_preset", "label": "Font preset", "options": [
      { "value": "body", "label": "Body" },
      { "value": "h1", "label": "H1" },
      { "value": "h2", "label": "H2" },
      { "value": "h3", "label": "H3" },
      { "value": "h4", "label": "H4" },
      { "value": "h5", "label": "H5" },
      { "value": "h6", "label": "H6" }
    ], "default": "body" },
    { "type": "header", "content": "Content style" },
    {
      "type": "select",
      "id": "content_line_height",
      "label": "Content line height",
      "options": [
        { "value": "1.3", "label": "Tight" },
        { "value": "1.5", "label": "Normal" },
        { "value": "1.7", "label": "Loose" }
      ],
      "default": "1.5"
    },
     { "type": "color", "id": "content_text_color", "label": "Content text color", "default": "#000000" },
    { "type": "range", "id": "list_item_gap", "label": "List item spacing", "min": 0, "max": 24, "step": 1, "unit": "px", "default": 4 }
  ],
  "presets": [
    { "name": "Product Rich Content" }
  ]
}
{% endschema %}


